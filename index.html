<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet"/>
    <style>
        #video-container {
            max-width: 600px;
            margin: auto;
        }
    </style>
</head>
<body>

<div id="video-container">
    <video
        id="video-player"
        class="video-js vjs-default-skin"
        controls
        preload="auto"
        width="600"
        height="300">
        <source src="" type="application/dash+xml" id="video-source"/>
    </video>
    <div>
        <button onclick="loadVideo(0)">Load Video 1</button>
        <button onclick="loadVideo(1)">Load Video 2</button>
        <button onclick="loadVideo(2)">Load Video 3</button>
        <button onclick="loadVideo(3)">Load Video 4</button>
        <button onclick="loadVideo(4)">Load Video 5</button>
        <button onclick="loadVideo(5)">Load Video 6</button>
    </div>
</div>

<script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
<script>
    const videos = [
        {
            manifestUri: 'https://linearjitp-playback.astro.com.my/dash-wv/linear/2304/default.mpd',
            clearKey: {
                'a098896d2b11c5f3906a993c3ba5c610' : 'f3f842c54cc96cbbd0bcb96a4cb8a813'
            }
        },
        {
            manifestUri: 'https://linearjitp-playback.astro.com.my/dash-wv/linear/5055/default.mpd',
            clearKey: {
                '5d600eb70944d681c26c1f48fbe61f10' : '796139ba05a2ab425f978c7fd98b4372'
            }
        },
        {
            manifestUri: 'https://tglmp03.akamaized.net/out/v1/d15476c2807d4380b0cc375a7d861752/manifest.mpd',
            clearKey: {
                '363b551913124d6b80074ca295b25129' : 'a6c6efcab0076d572e5732fb6451d19c'
            }
        },
        {
            manifestUri: 'https://tglmp02.akamaized.net/out/v1/b37a81eb3585471cb9c639c78edcdefa/manifest.mpd',
            clearKey: {
                '90480f571f5d410891d7add7103c1e84' : 'b64f887d2480bcaea992c2f0826449a9'
            }
        },
        {
            manifestUri: 'https://linearjitp-playback.astro.com.my/dash-wv/linear/603/default.mpd',
            clearKey: {
                'efdb2a8d39151cc39f4b51d762cf9c10' : '13cc535ad4a73201147863cac386cdd3'
            }
        },
        {
            manifestUri: 'https://linearjitp-playback.astro.com.my/dash-wv/linear/5095/default.mpd',
            clearKey: {
                'b5bfe3554df2abcd37afe130a7e1d310' : 'dccbdf043ac43d18be0b3eb43a582876'
            }
        },
        {
            manifestUri: 'https://linearjitp-playback.astro.com.my/dash-wv/linear/2605/default.mpd',
            clearKey: {
                '6093e12639b24cd651ee6b3c13446d10' : 'f8326f668c7bee309e5302b513e5bdf7'
            }
        },
    ];

    async function loadVideo(index) {
        const player = videojs('video-player');
        const { manifestUri, clearKey } = videos[index];
        
        // Set the video source
        player.src({ src: manifestUri, type: 'application/dash+xml' });

        // ClearKey support
        if (clearKey) {
            const keySystem = 'com.widevine.alpha'; // Use appropriate key system
            const key = Object.entries(clearKey).map(([k, v]) => {
                return {
                    key: Uint8Array.from(k.match(/.{1,2}/g).map(byte => parseInt(byte, 16))),
                    initData: Uint8Array.from(v.match(/.{1,2}/g).map(byte => parseInt(byte, 16)))
                };
            });
            player.ready(() => {
                player.tech().el().setMediaKeys(new MediaKeys(keySystem, key));
            });
        }
        
        console.log('Loading video:', manifestUri);
        player.play();
    }
</script>

</body>
</html>
